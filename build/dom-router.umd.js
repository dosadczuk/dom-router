(function(v){typeof define=="function"&&define.amd?define(v):v()})(function(){"use strict";const v=e=>typeof e=="string"||e instanceof String,f=e=>e==null||v(e)&&e.length===0,P=(e,t)=>Object.values(t).includes(String(e)),V=e=>P(e,i)&&R().includes(e),z=e=>e instanceof HTMLAnchorElement,C=e=>e instanceof HTMLTemplateElement;var m;(function(e){e.Display="display",e.Template="template"})(m||(m={}));let b=document.documentElement;const L=(e,t)=>{var n;return(n=b.getAttribute(String(e)))!=null?n:t},U=e=>e.map(t=>L(t)),W=e=>b.hasAttribute(String(e)),I=e=>{b.removeAttribute(String(e))},B=e=>{e.forEach(t=>I(t))},F=()=>{const e=b.querySelectorAll(G());return e.length===0?[]:Array.from(e,t=>{const n=Array.from(t.attributes),o=new Map;for(const{name:r,value:a}of n)V(r)&&o.set(r,a);return{element:t,visible:!1,directives:o}})},T=(e,t)=>e.filter(n=>n.directives.has(t)),A=(e,t)=>{var n;return(n=e.find(o=>o.directives.has(t)))!=null?n:null},H=(e,t)=>{e.forEach(({element:n})=>{n.removeAttribute(t)})},S=e=>(t,n)=>{switch(e){case m.Display:n?N(t):$(t);break;case m.Template:n?O(t):j(t);break}return t.visible},N=e=>{e.element.style.display="revert",e.visible=!0},$=e=>{e.element.style.display="none",e.visible=!1},O=e=>{const{element:t}=e;if(!C(t))return;const n=t.content.firstElementChild;n!=null&&(e.element.replaceWith(n),e.element=n,e.visible=!0)},j=e=>{const{element:t}=e;if(C(t))return;const n=document.createElement("template");n.content.append(t.cloneNode(!0)),e.element.replaceWith(n),e.element=n,e.visible=!1},x=(e,t)=>{e.element.classList.add(...t)},_=(e,t)=>{e.element.classList.remove(...t)};var i;(function(e){e.Initialize="data-router",e.Cloak="data-router-cloak",e.Title="data-router-title",e.TitleDefault="data-router-title-default",e.Link="data-router-link",e.LinkActive="data-router-link-active",e.Page="data-router-page",e.PageFallback="data-router-page-fallback",e.Sitemap="data-router-sitemap",e.SitemapIgnore="data-router-sitemap-ignore"})(i||(i={}));const E=new Map,c=(e,t)=>{E.set(e,t!=null?t:null)},q=(e,t)=>{for(const n of t){const o=E.get(n);if(o==null)continue;const{factory:r,options:a}=o;if(r!=null){const l=r(e,T(e,n),a);l!=null&&l()}a!=null&&a.removable&&H(e,n)}},R=()=>Array.from(E.keys()),G=()=>R().map(e=>`[${e}]`).join(", ");var u;(function(e){e[e.PageChange=0]="PageChange",e[e.ViewChange=1]="ViewChange"})(u||(u={}));var p;(function(e){e.BeforeMount="router:before-mount",e.Mounted="router:mounted",e.BeforePageUpdate="router:before-page-update",e.PageUpdated="router:page-updated",e.BeforeViewUpdate="router:before-view-update",e.ViewUpdated="router:view-updated"})(p||(p={}));const h=new Map,w=(e,t)=>(h.has(e)||h.set(e,new Set),h.get(e).add(t),()=>{h.get(e).delete(t)}),y=(e,t)=>{var n;(n=h.get(e))==null||n.forEach(o=>o(t))},J=(e,t,n)=>(e.addEventListener(String(t),n),()=>{e.removeEventListener(String(t),n)}),d=(e,t,n)=>{e.dispatchEvent(new CustomEvent(String(t),{detail:n,bubbles:!0,composed:!0,cancelable:!0}))},K=e=>t=>{t.preventDefault(),t.stopPropagation(),e(t)};function Q(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,o,r,a,l=[],s="",g=e.split("/");for(g[0]||g.shift();r=g.shift();)n=r[0],n==="*"?(l.push("wild"),s+="/(.*)"):n===":"?(o=r.indexOf("?",1),a=r.indexOf(".",1),l.push(r.substring(1,~o?o:~a?a:r.length)),s+=!!~o&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(s+=(~o?"?":"")+"\\"+r.substring(a))):s+="/"+r;return{keys:l,pattern:new RegExp("^"+s+(t?"(?=$|/)":"/?$"),"i")}}const D=()=>new URL(window.location.href),k=(e,t=D())=>Q(e).pattern.test(t.pathname);c(i.Initialize,{factory:()=>{let e=L(i.Initialize,"");P(e,m)||(e=m.Display),d(document,p.BeforeMount),w(u.PageChange,t=>{!k(t,D())||(d(document,p.BeforePageUpdate),history.pushState(null,"",t),d(document,p.PageUpdated),y(u.ViewChange,S(e)))}),J(window,"popstate",()=>{y(u.ViewChange,S(e))}),y(u.ViewChange,S(e)),d(document,p.Mounted)},options:{removable:!0}}),c(i.Cloak,{factory:null,options:{removable:!0}}),c(i.Link,{factory:(e,t)=>{for(const n of t){const o=M(n);f(o)||n.element.addEventListener("click",K(()=>{y(u.PageChange,o)}))}},options:{removable:!0}});const M=e=>{var o;const{element:t,directives:n}=e;return z(t)&&!f(t.href)?t.pathname:(o=n.get(i.Link))!=null?o:null};c(i.LinkActive,{factory:(e,t)=>{w(u.ViewChange,()=>{for(const n of t){const o=M(n);if(f(o))continue;let r=n.directives.get(i.LinkActive);f(r)&&(r="active"),k(o)?x(n,r.split(" ")):_(n,r.split(" "))}})},options:{removable:!0}}),c(i.Page,{factory:(e,t)=>{const n=X(e);if(n.size===0)return;const o=A(t,i.PageFallback);w(u.ViewChange,r=>{const a={route:null,element:null};d(document,p.BeforeViewUpdate,a);for(const[l,s]of n)r(s,k(l))&&(a.route=l,a.element=s.element);a.element==null&&o!=null&&r(o,!0)&&(a.element=o.element),d(document,p.ViewUpdated,a)})},options:{removable:!0}});const X=e=>{const t=new Map;for(const n of e){const o=n.directives.get(i.Page);f(o)||t.set(o,n)}return t};c(i.PageFallback,{factory:null,options:{removable:!0}}),c(i.Sitemap,{factory:e=>{const t=A(e,i.Sitemap);if(t==null)return;const n=T(e,i.Page);if(n.length===0)return;const o=document.createElement("ol");for(const{directives:r}of n){if(r.has(i.SitemapIgnore))continue;const a=r.get(i.Page),l=r.get(i.Title);if(f(a)||f(l))continue;const s=document.createElement("a");s.href=a,s.text=l;const g=document.createElement("li");g.append(s),o.append(g)}t.element.append(o)},options:{removable:!1}}),c(i.SitemapIgnore,{factory:null,options:{removable:!0}}),c(i.Title,{factory:e=>{const t=T(e,i.Page);if(t.length===0)return;const[n,o]=U([i.Title,i.TitleDefault]);return w(u.ViewChange,()=>{var r;for(const a of t){const l=a.directives.get(i.Page),s=(r=a.directives.get(i.Title))!=null?r:o;if(!(f(l)||f(s))&&!!k(l)){n!=null?document.title=n.replace("{{title}}",s):document.title=s;break}}}),()=>{B([i.Title,i.TitleDefault])}},options:{removable:!0}}),c(i.TitleDefault,{factory:null,options:{removable:!0}});const Y=[i.Cloak,i.TitleDefault,i.Title,i.PageFallback,i.Page,i.SitemapIgnore,i.Sitemap,i.LinkActive,i.Link,i.Initialize];(function(){if(!W(i.Initialize))throw new Error(`Router cannot be initialized. Add '${i.Initialize}' attribute to root element.`);const n=F();if(n.length===0)throw new Error("Router cannot be initialized. No directive found.");q(n,Y)})()});
